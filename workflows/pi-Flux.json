{"id":"91f6bbe2-ed41-4fd6-bac7-71d5b5864ecb","revision":0,"last_node_id":82,"last_link_id":161,"nodes":[{"id":8,"type":"VAEDecode","pos":[880,580],"size":[210,46],"flags":{"collapsed":false},"order":9,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":157},{"localized_name":"vae","name":"vae","type":"VAE","link":76}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[110]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"VAEDecode","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[]},{"id":80,"type":"ModelSamplingPiFlow","pos":[550,60],"size":[270,58],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":153},{"localized_name":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[154]}],"properties":{"cnr_id":"comfyui-piflow","ver":"1.0.2","Node name for S&R":"ModelSamplingPiFlow","widget_ue_connectable":{}},"widgets_values":[3.2]},{"id":58,"type":"EmptySD3LatentImage","pos":[50,540],"size":[270,106],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[150]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"EmptySD3LatentImage","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[1360,768,1]},{"id":79,"type":"pi-Flow Sampler","pos":[840,230],"size":[298,290],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":154},{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":161},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":150},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"substeps","name":"substeps","type":"INT","widget":{"name":"substeps"},"link":null},{"localized_name":"final_step_size_scale","name":"final_step_size_scale","type":"FLOAT","widget":{"name":"final_step_size_scale"},"link":null},{"localized_name":"diffusion_coefficient","name":"diffusion_coefficient","type":"FLOAT","widget":{"name":"diffusion_coefficient"},"link":null},{"localized_name":"gm_temperature","name":"gm_temperature","type":"COMBO","widget":{"name":"gm_temperature"},"link":null},{"localized_name":"manual_gm_temperature","name":"manual_gm_temperature","type":"FLOAT","widget":{"name":"manual_gm_temperature"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[157]}],"properties":{"cnr_id":"comfyui-piflow","ver":"1.0.2","Node name for S&R":"pi-Flow Sampler","widget_ue_connectable":{}},"widgets_values":[24239711532441,"randomize",4,128,0.5000000000000001,0,"auto",1,1]},{"id":81,"type":"DualCLIPLoader","pos":[20,220],"size":[330,130],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"clip_name1","name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"link":null},{"localized_name":"clip_name2","name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"label":"CLIP","localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[159]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.23","Node name for S&R":"DualCLIPLoader","widget_ue_connectable":{}},"widgets_values":["t5xxl_fp16.safetensors","clip_l.safetensors","flux","default"],"color":"#322","bgcolor":"#533"},{"id":60,"type":"SaveImage","pos":[1160,20],"size":[490,620],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":110},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"SaveImage","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["ComfyUI"]},{"id":6,"type":"CLIPTextEncode","pos":[390,220],"size":[422.84503173828125,164.31304931640625],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":159},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[160]}],"title":"CLIP Text Encode","properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"CLIPTextEncode","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["A portrait photo of a kangaroo wearing an orange hoodie and blue sunglasses standing in front of the Sydney Opera House holding a sign on the chest that says \"Welcome Friends\""],"color":"#232","bgcolor":"#353"},{"id":39,"type":"VAELoader","pos":[20,390],"size":[330,60],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[76]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"VAELoader","models":[{"name":"qwen_image_vae.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/vae/qwen_image_vae.safetensors","directory":"vae"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["ae.safetensors"]},{"id":78,"type":"Load pi-Flow Model","pos":[20,50],"size":[330.6031188964844,130],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null},{"localized_name":"adapter_name","name":"adapter_name","shape":7,"type":"COMBO","widget":{"name":"adapter_name"},"link":null},{"localized_name":"adapter_strength","name":"adapter_strength","shape":7,"type":"FLOAT","widget":{"name":"adapter_strength"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[153]}],"properties":{"cnr_id":"comfyui-piflow","ver":"1.0.2","Node name for S&R":"Load pi-Flow Model","widget_ue_connectable":{}},"widgets_values":["flux1-dev.safetensors","default","gmflux_k8_piid_4step.safetensors",1]},{"id":67,"type":"MarkdownNote","pos":[-540,10],"size":[540,650],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"title":"Model links","properties":{"widget_ue_connectable":{}},"widgets_values":["## Model links\n\n**Base model**\n\n- Download [flux1-dev.safetensors](https://huggingface.co/black-forest-labs/FLUX.1-dev/resolve/main/flux1-dev.safetensors) and save it to\n<br>`models/diffusion_models/flux1-dev.safetensors`\n\n**pi-Flow adapter**\n\n- Download [gmflux_k8_piid_4step/diffusion_pytorch_model.safetensors](https://huggingface.co/Lakonik/pi-FLUX.1/resolve/main/gmflux_k8_piid_4step/diffusion_pytorch_model.safetensors) and save it to \n<br>`models/loras/gmflux_k8_piid_4step.safetensors`\n\n- Download [gmflux_k8_piid_8step/diffusion_pytorch_model.safetensors](https://huggingface.co/Lakonik/pi-FLUX.1/resolve/main/gmflux_k8_piid_8step/diffusion_pytorch_model.safetensors) and save it to \n<br>`models/loras/gmflux_k8_piid_8step.safetensors`\n\n**Text encoder**\n\n- Download [clip_l.safetensors](https://huggingface.co/comfyanonymous/flux_text_encoders/resolve/main/clip_l.safetensors) and save it to\n<br>`models/text_encoders/clip_l.safetensors`\n\n- Download [t5xxl_fp16.safetensors](https://huggingface.co/comfyanonymous/flux_text_encoders/resolve/main/t5xxl_fp16.safetensors) and save it to\n<br>`models/text_encoders/t5xxl_fp16.safetensors`\n\n**VAE**\n\n- Download [ae.safetensors](https://huggingface.co/black-forest-labs/FLUX.1-schnell/resolve/main/ae.safetensors) and save it to\n<br>`models/vae/ae.safetensors`\n\n**Model Storage Location**\n\n```\nðŸ“‚ ComfyUI/\nâ”œâ”€â”€ ðŸ“‚ models/\nâ”‚   â”œâ”€â”€ ðŸ“‚ diffusion_models/\nâ”‚   â”‚   â””â”€â”€ flux1-dev.safetensors\nâ”‚   â”œâ”€â”€ ðŸ“‚ loras/\nâ”‚   â”‚   â”œâ”€â”€ gmflux_k8_piid_4step.safetensors\nâ”‚   â”‚   â””â”€â”€ gmflux_k8_piid_8step.safetensors\nâ”‚   â”œâ”€â”€ ðŸ“‚ vae/\nâ”‚   â”‚   â””â”€â”€ ae.safetensors\nâ”‚   â””â”€â”€ ðŸ“‚ text_encoders/\nâ”‚       â”œâ”€â”€ clip_l.safetensors\nâ”‚       â””â”€â”€ t5xxl_fp16.safetensors\n```\n\n## Adapter strength\n\nIncreasing `adapter_strength` in the loader node can amplify contrast, reduce noise, and enhance text rendering.\n\n## Sampler steps\n\nUse gmflux_k8_piid_4step.safetensors for 4-step sampling and gmflux_k8_piid_8step.safetensors for 8-step sampling. Using other settings may result in amplified or reduced contrast, which could be re-calibrated by adjusting the `adapter_strength`.\n\n## Guidance \n\nThe adapters **only work with `guidance` set to 3.5**. Do NOT modify this value."],"color":"#432","bgcolor":"#653"},{"id":82,"type":"FluxGuidance","pos":[550,450],"size":[270,58],"flags":{"collapsed":true,"pinned":true},"order":7,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":160},{"localized_name":"guidance","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[161]}],"title":"(DO NOT MODIFY) FluxGuidance","properties":{"cnr_id":"comfy-core","ver":"0.3.68","Node name for S&R":"FluxGuidance","widget_ue_connectable":{}},"widgets_values":[3.5]}],"links":[[76,39,0,8,1,"VAE"],[110,8,0,60,0,"IMAGE"],[150,58,0,79,2,"LATENT"],[153,78,0,80,0,"MODEL"],[154,80,0,79,0,"MODEL"],[157,79,0,8,0,"LATENT"],[159,81,0,6,0,"CLIP"],[160,6,0,82,0,"CONDITIONING"],[161,82,0,79,1,"CONDITIONING"]],"groups":[{"id":1,"title":"Step1 - Load models","bounding":[10,-20,350,480],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"Step2 - Image size","bounding":[10,470,350,190],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"Step3 - Prompt","bounding":[380,140,440,260],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":1.4864362802415134,"offset":[177.79631309336912,116.8421204124055]},"frontendVersion":"1.23.4","ue_links":[],"links_added_by_ue":[],"VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true},"version":0.4}